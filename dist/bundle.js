!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,o=function(){function t(t,e){this.x=t,this.y=e,this.nextField=void 0}return t.prototype.detectCollision=function(t){return this.x===t.x&&this.y===t.y},t}();!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT"}(n||(n={}));var r,s=function(){function t(){}return t.GAME_WIDTH=20,t.GAME_HEIGHT=20,t.FIELD_SIZE=20,t}(),h=function(){function t(t){this.head=new o(2,7),this.tail=[],this.size=0,this.game=t}return t.prototype.draw=function(t){t.fillStyle="red",this.drawField(this.head,t,s.FIELD_SIZE);for(var e=0;e<this.tail.length;e++)this.drawField(this.tail[e],t,s.FIELD_SIZE)},t.prototype.changeDirection=function(t){t===n.LEFT&&this.direction===n.RIGHT||t===n.UP&&this.direction===n.DOWN||t===n.DOWN&&this.direction===n.UP||t===n.RIGHT&&this.direction===n.LEFT||(this.direction=t)},t.prototype.move=function(){void 0!==this.direction&&(this.tail.push(this.head),this.head=this.getNext(),this.head.detectCollision(this.game.food)&&this.size++,this.tail.length>this.size&&this.tail.splice(0,1))},t.prototype.snakeSlidesIntoItself=function(){for(var t=0;t<this.tail.length;t++)if(this.head.detectCollision(this.tail[t]))return!0;return!1},t.prototype.getNext=function(){switch(this.direction){case n.UP:return this.head.y-1<1?new o(this.head.x,s.GAME_HEIGHT):new o(this.head.x,this.head.y-1);case n.RIGHT:return this.head.x+1>s.GAME_WIDTH?new o(1,this.head.y):new o(this.head.x+1,this.head.y);case n.DOWN:return this.head.y===s.GAME_HEIGHT?new o(this.head.x,1):new o(this.head.x,this.head.y+1);case n.LEFT:return this.head.x-1==0?new o(s.GAME_WIDTH,this.head.y):new o(this.head.x-1,this.head.y)}},t.prototype.drawField=function(t,e,i){e.fillRect((t.x-1)*i,(t.y-1)*i,i,i)},t}(),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.draw=function(t){t.fillStyle="green",t.fillRect((this.x-1)*s.FIELD_SIZE,(this.y-1)*s.FIELD_SIZE,s.FIELD_SIZE,s.FIELD_SIZE)},e}(o);i.d(e,"SnakeGame",function(){return u});var u=function(){function t(){var t=this,e=document.getElementById("snake");this.ctx=e.getContext("2d"),this.startNewGame(),setInterval(function(){t.nextStep()},100),this.keyboardInput()}return t.prototype.nextStep=function(){this.snake.move(),this.draw()},t.prototype.gameOver=function(){},t.prototype.snakeFoundFood=function(){this.placeNewFood(),this.increaseScore()},t.prototype.startNewGame=function(){this.snake=new h(this),this.food=new a(4,4),this.draw(),this.score=0},t.prototype.placeNewFood=function(){},t.prototype.increaseScore=function(){this.score++},t.prototype.draw=function(){this.ctx.fillStyle="grey",this.ctx.fillRect(0,0,s.GAME_WIDTH*s.FIELD_SIZE,s.GAME_HEIGHT*s.FIELD_SIZE),this.food.draw(this.ctx),this.snake.draw(this.ctx)},t.prototype.keyboardInput=function(){var t=this;document.addEventListener("keydown",function(e){37===e.keyCode?t.snake.changeDirection(n.LEFT):38===e.keyCode?t.snake.changeDirection(n.UP):39===e.keyCode?t.snake.changeDirection(n.RIGHT):40===e.keyCode&&t.snake.changeDirection(n.DOWN)})},t}();new u}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpZWxkLnRzIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50LnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFrZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9vZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc25ha2VfZ2FtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRGlyZWN0aW9uIiwiRmllbGQiLCJ4IiwieSIsInRoaXMiLCJuZXh0RmllbGQiLCJ1bmRlZmluZWQiLCJkZXRlY3RDb2xsaXNpb24iLCJmaWVsZCIsIkNvbnN0YW50IiwiR0FNRV9XSURUSCIsIkdBTUVfSEVJR0hUIiwiRklFTERfU0laRSIsInNuYWtlX1NuYWtlIiwiU25ha2UiLCJnYW1lIiwiaGVhZCIsInRhaWwiLCJzaXplIiwiZHJhdyIsImN0eCIsImZpbGxTdHlsZSIsImRyYXdGaWVsZCIsImxlbmd0aCIsImNoYW5nZURpcmVjdGlvbiIsImRpcmVjdGlvbiIsIkxFRlQiLCJSSUdIVCIsIlVQIiwiRE9XTiIsIm1vdmUiLCJwdXNoIiwiZ2V0TmV4dCIsImZvb2QiLCJzcGxpY2UiLCJzbmFrZVNsaWRlc0ludG9JdHNlbGYiLCJzbmFrZVBhcnQiLCJmaWxsUmVjdCIsImZvb2RfRm9vZCIsIl9zdXBlciIsIkZvb2QiLCJfX2V4dGVuZHMiLCJzbmFrZV9nYW1lX1NuYWtlR2FtZSIsIlNuYWtlR2FtZSIsIl90aGlzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJzdGFydE5ld0dhbWUiLCJzZXRJbnRlcnZhbCIsIm5leHRTdGVwIiwia2V5Ym9hcmRJbnB1dCIsInNuYWtlIiwiZ2FtZU92ZXIiLCJzbmFrZUZvdW5kRm9vZCIsInBsYWNlTmV3Rm9vZCIsImluY3JlYXNlU2NvcmUiLCJzY29yZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUNvZGUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFuQixLQUFBZ0IsRUFBQUMsSUFHdER4QixFQUFBMkIsRUFBQSxHQUlBM0IsSUFBQTRCLEVBQUEseUNDbkVBLElDQVlDLEVEQVpDLEVBQUEsV0FLSSxTQUFBQSxFQUFZQyxFQUFZQyxHQUNwQkMsS0FBS0YsRUFBSUEsRUFDVEUsS0FBS0QsRUFBSUEsRUFDVEMsS0FBS0MsZUFBWUMsRUFNekIsT0FIV0wsRUFBQUwsVUFBQVcsZ0JBQVAsU0FBdUJDLEdBQ25CLE9BQVFKLEtBQUtGLElBQU1NLEVBQU1OLEdBQUtFLEtBQUtELElBQU1LLEVBQU1MLEdBRXZERixFQWRBLElDQUEsU0FBWUQsR0FDUkEsSUFBQSxXQUNBQSxJQUFBLGlCQUNBQSxJQUFBLGVBQ0FBLElBQUEsZUFKSixDQUFZQSxXQ0FaLE1BQUFTLEVBQUEsb0JBQUFBLEtBSUEsT0FIb0JBLEVBQUFDLFdBQXNCLEdBQ3RCRCxFQUFBRSxZQUF1QixHQUN2QkYsRUFBQUcsV0FBc0IsR0FDMUNILEVBSkEsR0NLQUksRUFBQSxXQU9JLFNBQUFDLEVBQVlDLEdBQ1JYLEtBQUtZLEtBQU8sSUFBSWYsRUFBTSxFQUFHLEdBQ3pCRyxLQUFLYSxRQUNMYixLQUFLYyxLQUFPLEVBQ1pkLEtBQUtXLEtBQU9BLEVBdUZwQixPQXBGV0QsRUFBQWxCLFVBQUF1QixLQUFQLFNBQVlDLEdBQ1JBLEVBQUlDLFVBQVksTUFDaEJqQixLQUFLa0IsVUFBVWxCLEtBQUtZLEtBQU1JLEVBQUtYLEVBQVNHLFlBQ3hDLElBQUksSUFBSXJDLEVBQVksRUFBR0EsRUFBSTZCLEtBQUthLEtBQUtNLE9BQVFoRCxJQUN6QzZCLEtBQUtrQixVQUFVbEIsS0FBS2EsS0FBSzFDLEdBQUk2QyxFQUFLWCxFQUFTRyxhQUk1Q0UsRUFBQWxCLFVBQUE0QixnQkFBUCxTQUF1QkMsR0FDaEJBLElBQWN6QixFQUFVMEIsTUFBUXRCLEtBQUtxQixZQUFjekIsRUFBVTJCLE9BRXJERixJQUFjekIsRUFBVTRCLElBQU14QixLQUFLcUIsWUFBY3pCLEVBQVU2QixNQUUzREosSUFBY3pCLEVBQVU2QixNQUFRekIsS0FBS3FCLFlBQWN6QixFQUFVNEIsSUFFN0RILElBQWN6QixFQUFVMkIsT0FBU3ZCLEtBQUtxQixZQUFjekIsRUFBVTBCLE9BR3pFdEIsS0FBS3FCLFVBQVlBLElBR2RYLEVBQUFsQixVQUFBa0MsS0FBUCxnQkFDMEJ4QixJQUFuQkYsS0FBS3FCLFlBSVJyQixLQUFLYSxLQUFLYyxLQUFLM0IsS0FBS1ksTUFHcEJaLEtBQUtZLEtBQU9aLEtBQUs0QixVQUVkNUIsS0FBS1ksS0FBS1QsZ0JBQWdCSCxLQUFLVyxLQUFLa0IsT0FDbkM3QixLQUFLYyxPQUlMZCxLQUFLYSxLQUFLTSxPQUFTbkIsS0FBS2MsTUFDeEJkLEtBQUthLEtBQUtpQixPQUFPLEVBQUcsS0FLcEJwQixFQUFBbEIsVUFBQXVDLHNCQUFSLFdBQ0ksSUFBSSxJQUFJNUQsRUFBWSxFQUFHQSxFQUFJNkIsS0FBS2EsS0FBS00sT0FBUWhELElBQ3pDLEdBQUc2QixLQUFLWSxLQUFLVCxnQkFBZ0JILEtBQUthLEtBQUsxQyxJQUNuQyxPQUFPLEVBSWYsT0FBTyxHQUdIdUMsRUFBQWxCLFVBQUFvQyxRQUFSLFdBQ0ksT0FBUTVCLEtBQUtxQixXQUNULEtBQUt6QixFQUFVNEIsR0FDWCxPQUFHeEIsS0FBS1ksS0FBS2IsRUFBSSxFQUFJLEVBQ1YsSUFBSUYsRUFBTUcsS0FBS1ksS0FBS2QsRUFBR08sRUFBU0UsYUFFaEMsSUFBSVYsRUFBTUcsS0FBS1ksS0FBS2QsRUFBR0UsS0FBS1ksS0FBS2IsRUFBSSxHQUVwRCxLQUFLSCxFQUFVMkIsTUFDWCxPQUFHdkIsS0FBS1ksS0FBS2QsRUFBSSxFQUFJTyxFQUFTQyxXQUNuQixJQUFJVCxFQUFNLEVBQUdHLEtBQUtZLEtBQUtiLEdBRXZCLElBQUlGLEVBQU1HLEtBQUtZLEtBQUtkLEVBQUksRUFBR0UsS0FBS1ksS0FBS2IsR0FFcEQsS0FBS0gsRUFBVTZCLEtBQ1gsT0FBR3pCLEtBQUtZLEtBQUtiLElBQU1NLEVBQVNFLFlBQ2pCLElBQUlWLEVBQU1HLEtBQUtZLEtBQUtkLEVBQUcsR0FFdkIsSUFBSUQsRUFBTUcsS0FBS1ksS0FBS2QsRUFBR0UsS0FBS1ksS0FBS2IsRUFBSSxHQUVwRCxLQUFLSCxFQUFVMEIsS0FDWCxPQUFHdEIsS0FBS1ksS0FBS2QsRUFBSSxHQUFNLEVBQ1osSUFBSUQsRUFBTVEsRUFBU0MsV0FBWU4sS0FBS1ksS0FBS2IsR0FFekMsSUFBSUYsRUFBTUcsS0FBS1ksS0FBS2QsRUFBRSxFQUFHRSxLQUFLWSxLQUFLYixLQUtsRFcsRUFBQWxCLFVBQUEwQixVQUFSLFNBQWtCYyxFQUFrQmhCLEVBQStCRixHQUMvREUsRUFBSWlCLFVBQVVELEVBQVVsQyxFQUFJLEdBQUtnQixHQUFPa0IsRUFBVWpDLEVBQUksR0FBS2UsRUFBTUEsRUFBTUEsSUFFL0VKLEVBbEdBLHlSQ0ZBd0IsRUFBQSxTQUFBQyxHQUFBLFNBQUFDLG1EQUtBLE9BTDBCQyxFQUFBRCxFQUFBRCxHQUNmQyxFQUFBNUMsVUFBQXVCLEtBQVAsU0FBWUMsR0FDUkEsRUFBSUMsVUFBWSxRQUNoQkQsRUFBSWlCLFVBQVVqQyxLQUFLRixFQUFJLEdBQUtPLEVBQVNHLFlBQWFSLEtBQUtELEVBQUksR0FBS00sRUFBU0csV0FBV0gsRUFBU0csV0FBWUgsRUFBU0csYUFFMUg0QixFQUxBLENBQTBCdkMsMkNDRTFCLElBQUF5QyxFQUFBLFdBTUksU0FBQUMsSUFBQSxJQUFBQyxFQUFBeEMsS0FDUXlDLEVBQWlEQyxTQUFTQyxlQUFlLFNBQzdFM0MsS0FBS2dCLElBQU15QixFQUFPRyxXQUFXLE1BRTdCNUMsS0FBSzZDLGVBRUxDLFlBQVksV0FDUk4sRUFBS08sWUFDTixLQUNIL0MsS0FBS2dELGdCQW9EYixPQWpEV1QsRUFBQS9DLFVBQUF1RCxTQUFQLFdBQ0kvQyxLQUFLaUQsTUFBTXZCLE9BQ1gxQixLQUFLZSxRQUdGd0IsRUFBQS9DLFVBQUEwRCxTQUFQLGFBSU9YLEVBQUEvQyxVQUFBMkQsZUFBUCxXQUNJbkQsS0FBS29ELGVBQ0xwRCxLQUFLcUQsaUJBR0RkLEVBQUEvQyxVQUFBcUQsYUFBUixXQUNJN0MsS0FBS2lELE1BQVEsSUFBSXhDLEVBQU1ULE1BQ3ZCQSxLQUFLNkIsS0FBTyxJQUFJSyxFQUFLLEVBQUcsR0FDeEJsQyxLQUFLZSxPQUNMZixLQUFLc0QsTUFBUSxHQUdUZixFQUFBL0MsVUFBQTRELGFBQVIsYUFJUWIsRUFBQS9DLFVBQUE2RCxjQUFSLFdBQ0lyRCxLQUFLc0QsU0FHRGYsRUFBQS9DLFVBQUF1QixLQUFSLFdBQ0lmLEtBQUtnQixJQUFJQyxVQUFZLE9BQ3JCakIsS0FBS2dCLElBQUlpQixTQUFTLEVBQUcsRUFBRzVCLEVBQVNDLFdBQWFELEVBQVNHLFdBQVlILEVBQVNFLFlBQWNGLEVBQVNHLFlBQ25HUixLQUFLNkIsS0FBS2QsS0FBS2YsS0FBS2dCLEtBQ3BCaEIsS0FBS2lELE1BQU1sQyxLQUFLZixLQUFLZ0IsTUFHakJ1QixFQUFBL0MsVUFBQXdELGNBQVIsZUFBQVIsRUFBQXhDLEtBQ0kwQyxTQUFTYSxpQkFBaUIsVUFBVyxTQUFDQyxHQUNaLEtBQWxCQSxFQUFNQyxRQUNWakIsRUFBS1MsTUFBTTdCLGdCQUFnQnhCLEVBQVUwQixNQUNSLEtBQWxCa0MsRUFBTUMsUUFDYmpCLEVBQUtTLE1BQU03QixnQkFBZ0J4QixFQUFVNEIsSUFDWixLQUFsQmdDLEVBQU1DLFFBQ2JqQixFQUFLUyxNQUFNN0IsZ0JBQWdCeEIsRUFBVTJCLE9BQ1osS0FBbEJpQyxFQUFNQyxTQUNiakIsRUFBS1MsTUFBTTdCLGdCQUFnQnhCLEVBQVU2QixTQUlyRGMsRUFuRUEsR0FxRXVCLElBQUlEIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgRmllbGQge1xyXG4gICAgcHVibGljIG5leHRGaWVsZCA6IEZpZWxkO1xyXG4gICAgcHVibGljIHggOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgeSA6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4IDogbnVtYmVyLCB5IDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMubmV4dEZpZWxkID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXRlY3RDb2xsaXNpb24oZmllbGQ6IEZpZWxkKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnggPT09IGZpZWxkLnggJiYgdGhpcy55ID09PSBmaWVsZC55KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBlbnVtIERpcmVjdGlvbiB7XHJcbiAgICBVUCxcclxuICAgIFJJR0hULFxyXG4gICAgRE9XTixcclxuICAgIExFRlRcclxufSIsImV4cG9ydCBjbGFzcyBDb25zdGFudCB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgR0FNRV9XSURUSCA6IG51bWJlciA9IDIwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdBTUVfSEVJR0hUIDogbnVtYmVyID0gMjA7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRklFTERfU0laRSA6IG51bWJlciA9IDIwO1xyXG59IiwiaW1wb3J0IHsgRmllbGQgfSBmcm9tIFwiLi9maWVsZFwiO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwiLi9kaXJlY3Rpb25cIjtcclxuaW1wb3J0IHsgU25ha2VHYW1lIH0gZnJvbSBcIi4vc25ha2VfZ2FtZVwiO1xyXG5pbXBvcnQgeyBDb25zdGFudCB9IGZyb20gXCIuL2NvbnN0YW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU25ha2Uge1xyXG4gICAgcHJpdmF0ZSBnYW1lIDogU25ha2VHYW1lO1xyXG4gICAgcHJpdmF0ZSBoZWFkIDogRmllbGQ7XHJcbiAgICBwcml2YXRlIHRhaWwgOiBGaWVsZFtdO1xyXG4gICAgcHJpdmF0ZSBzaXplIDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IERpcmVjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lOiBTbmFrZUdhbWUpIHtcclxuICAgICAgICB0aGlzLmhlYWQgPSBuZXcgRmllbGQoMiwgNyk7XHJcbiAgICAgICAgdGhpcy50YWlsID0gW107XHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkcmF3KGN0eCA6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xyXG4gICAgICAgIHRoaXMuZHJhd0ZpZWxkKHRoaXMuaGVhZCwgY3R4LCBDb25zdGFudC5GSUVMRF9TSVpFKTtcclxuICAgICAgICBmb3IodmFyIGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnRhaWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3RmllbGQodGhpcy50YWlsW2ldLCBjdHgsIENvbnN0YW50LkZJRUxEX1NJWkUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hhbmdlRGlyZWN0aW9uKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgaWYoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTEVGVCAmJiB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJJR0hUKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlVQICYmIHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRE9XTikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ET1dOICYmIHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uVVApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUklHSFQgJiYgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5MRUZUKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdmUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYodGhpcy5kaXJlY3Rpb24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFkZCBjdXJyZW50IGhlYWQgdG8gdGFpbFxyXG4gICAgICAgIHRoaXMudGFpbC5wdXNoKHRoaXMuaGVhZCk7XHJcblxyXG4gICAgICAgIC8vIGdldCBuZXh0IHBvc2l0aW9uXHJcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5nZXROZXh0KCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuaGVhZC5kZXRlY3RDb2xsaXNpb24odGhpcy5nYW1lLmZvb2QpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZml4IHRoZSB3b3JtIHNpemVcclxuICAgICAgICBpZiAodGhpcy50YWlsLmxlbmd0aCA+IHRoaXMuc2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRhaWwuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzbmFrZVNsaWRlc0ludG9JdHNlbGYoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgZm9yKHZhciBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy50YWlsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuaGVhZC5kZXRlY3RDb2xsaXNpb24odGhpcy50YWlsW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE5leHQoKTogRmllbGQge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5kaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uVVA6XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhlYWQueSAtIDEgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCh0aGlzLmhlYWQueCwgQ29uc3RhbnQuR0FNRV9IRUlHSFQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHRoaXMuaGVhZC54LCB0aGlzLmhlYWQueSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5SSUdIVDpcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaGVhZC54ICsgMSA+IENvbnN0YW50LkdBTUVfV0lEVEgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkKDEsIHRoaXMuaGVhZC55KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCh0aGlzLmhlYWQueCArIDEsIHRoaXMuaGVhZC55KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uRE9XTjpcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaGVhZC55ID09PSBDb25zdGFudC5HQU1FX0hFSUdIVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5oZWFkLngsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHRoaXMuaGVhZC54LCB0aGlzLmhlYWQueSArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIERpcmVjdGlvbi5MRUZUOlxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5oZWFkLnggLSAxID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZChDb25zdGFudC5HQU1FX1dJRFRILCB0aGlzLmhlYWQueSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5oZWFkLngtMSwgdGhpcy5oZWFkLnkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdGaWVsZChzbmFrZVBhcnQ6IEZpZWxkLCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgc2l6ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KChzbmFrZVBhcnQueCAtIDEpICogc2l6ZSwgKHNuYWtlUGFydC55IC0gMSkgKiBzaXplLCBzaXplLCBzaXplKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4vZmllbGRcIjtcclxuaW1wb3J0IHsgQ29uc3RhbnQgfSBmcm9tIFwiLi9jb25zdGFudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvb2QgZXh0ZW5kcyBGaWVsZCB7XHJcbiAgICBwdWJsaWMgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6dm9pZCB7XHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiZ3JlZW5cIjtcclxuICAgICAgICBjdHguZmlsbFJlY3QoKHRoaXMueCAtIDEpICogQ29uc3RhbnQuRklFTERfU0laRSwgKHRoaXMueSAtIDEpICogQ29uc3RhbnQuRklFTERfU0laRSxDb25zdGFudC5GSUVMRF9TSVpFLCBDb25zdGFudC5GSUVMRF9TSVpFKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFNuYWtlIH0gZnJvbSBcIi4vc25ha2VcIjtcclxuaW1wb3J0IHsgRm9vZCB9IGZyb20gXCIuL2Zvb2RcIjtcclxuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIi4vZGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IENvbnN0YW50IH0gZnJvbSBcIi4vY29uc3RhbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTbmFrZUdhbWUge1xyXG4gICAgcHVibGljIGZvb2QgOiBGb29kO1xyXG4gICAgcHJpdmF0ZSBzbmFrZSA6IFNuYWtlO1xyXG4gICAgcHJpdmF0ZSBjdHggOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIHNjb3JlIDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHZhciBjYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbmFrZVwiKTtcclxuICAgICAgICB0aGlzLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhcnROZXdHYW1lKCk7XHJcblxyXG4gICAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5uZXh0U3RlcCgpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZElucHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG5leHRTdGVwKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc25ha2UubW92ZSgpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnYW1lT3ZlcigpOiB2b2lkIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNuYWtlRm91bmRGb29kKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxhY2VOZXdGb29kKCk7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZVNjb3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0TmV3R2FtZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNuYWtlID0gbmV3IFNuYWtlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZm9vZCA9IG5ldyBGb29kKDQsIDQpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGxhY2VOZXdGb29kKCk6IHZvaWQge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluY3JlYXNlU2NvcmUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY29yZSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhdygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcImdyZXlcIjtcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCBDb25zdGFudC5HQU1FX1dJRFRIICogQ29uc3RhbnQuRklFTERfU0laRSwgQ29uc3RhbnQuR0FNRV9IRUlHSFQgKiBDb25zdGFudC5GSUVMRF9TSVpFKTtcclxuICAgICAgICB0aGlzLmZvb2QuZHJhdyh0aGlzLmN0eCk7XHJcbiAgICAgICAgdGhpcy5zbmFrZS5kcmF3KHRoaXMuY3R4KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtleWJvYXJkSW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzNykge1xyXG4gICAgICAgICAgICB0aGlzLnNuYWtlLmNoYW5nZURpcmVjdGlvbihEaXJlY3Rpb24uTEVGVCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5VUCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5SSUdIVCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5ET1dOKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgR2FtZSA6IFNuYWtlR2FtZSA9IG5ldyBTbmFrZUdhbWUoKTtcclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==