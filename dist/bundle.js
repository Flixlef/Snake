!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n,o=function(){function t(t,e){this.x=t,this.y=e,this.nextField=void 0}return t.prototype.detectCollision=function(t){return this.x===t.x&&this.y===t.y},t}();!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT"}(n||(n={}));var r,s=function(){function t(){}return t.GAME_WIDTH=20,t.GAME_HEIGHT=20,t.FIELD_SIZE=20,t}(),h=function(){function t(t){this.head=new o(2,7),this.tail=[],this.size=0,this.game=t}return t.prototype.draw=function(t){t.fillStyle="red",this.drawField(this.head,t,s.FIELD_SIZE);for(var e=0;e<this.tail.length;e++)this.drawField(this.tail[e],t,s.FIELD_SIZE)},t.prototype.changeDirection=function(t){t===n.LEFT&&this.direction===n.RIGHT||t===n.UP&&this.direction===n.DOWN||t===n.DOWN&&this.direction===n.UP||t===n.RIGHT&&this.direction===n.LEFT||(this.direction=t)},t.prototype.move=function(){void 0!==this.direction&&(this.tail.push(this.head),this.head=this.getNext(),this.head.detectCollision(this.game.food)&&this.size++,this.tail.length>this.size&&this.tail.splice(0,1))},t.prototype.snakeSlidesIntoItself=function(){for(var t=0;t<this.tail.length;t++)if(this.head.detectCollision(this.tail[t]))return!0;return!1},t.prototype.getNext=function(){switch(this.direction){case n.UP:return this.head.y-1<1?new o(this.head.x,s.GAME_HEIGHT):new o(this.head.x,this.head.y-1);case n.RIGHT:return this.head.x+1>s.GAME_WIDTH?new o(1,this.head.y):new o(this.head.x+1,this.head.y);case n.DOWN:return this.head.y===s.GAME_HEIGHT?new o(this.head.x,1):new o(this.head.x,this.head.y+1);case n.LEFT:return this.head.x-1==0?new o(s.GAME_WIDTH,this.head.y):new o(this.head.x-1,this.head.y)}},t.prototype.drawField=function(t,e,i){e.fillRect((t.x-1)*i,(t.y-1)*i,i,i)},t}(),c=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.draw=function(t){t.fillStyle="green",t.fillRect((this.x-1)*s.FIELD_SIZE,(this.y-1)*s.FIELD_SIZE,s.FIELD_SIZE,s.FIELD_SIZE)},e}(o);i.d(e,"SnakeGame",function(){return d});var d=function(){function t(){var t=this,e=document.getElementById("snake");this.ctx=e.getContext("2d"),this.snake=new h(this),this.food=new a(4,4),this.draw(),setInterval(function(){t.nextStep()},100),this.keyboardInput(),this.score=0}return t.prototype.nextStep=function(){this.snake.move(),this.draw()},t.prototype.snakeFoundFood=function(){this.placeNewFood(),this.increaseScore()},t.prototype.placeNewFood=function(){},t.prototype.increaseScore=function(){this.score++},t.prototype.draw=function(){this.ctx.fillStyle="grey",this.ctx.fillRect(0,0,s.GAME_WIDTH*s.FIELD_SIZE,s.GAME_HEIGHT*s.FIELD_SIZE),this.food.draw(this.ctx),this.snake.draw(this.ctx)},t.prototype.startGame=function(){},t.prototype.keyboardInput=function(){var t=this;document.addEventListener("keydown",function(e){37===e.keyCode?t.snake.changeDirection(n.LEFT):38===e.keyCode?t.snake.changeDirection(n.UP):39===e.keyCode?t.snake.changeDirection(n.RIGHT):40===e.keyCode&&t.snake.changeDirection(n.DOWN)})},t}();new d}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpZWxkLnRzIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50LnRzIiwid2VicGFjazovLy8uL3NyYy9zbmFrZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZm9vZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc25ha2VfZ2FtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiRGlyZWN0aW9uIiwiRmllbGQiLCJ4IiwieSIsInRoaXMiLCJuZXh0RmllbGQiLCJ1bmRlZmluZWQiLCJkZXRlY3RDb2xsaXNpb24iLCJmaWVsZCIsIkNvbnN0YW50IiwiR0FNRV9XSURUSCIsIkdBTUVfSEVJR0hUIiwiRklFTERfU0laRSIsInNuYWtlX1NuYWtlIiwiU25ha2UiLCJnYW1lIiwiaGVhZCIsInRhaWwiLCJzaXplIiwiZHJhdyIsImN0eCIsImZpbGxTdHlsZSIsImRyYXdGaWVsZCIsImxlbmd0aCIsImNoYW5nZURpcmVjdGlvbiIsImRpcmVjdGlvbiIsIkxFRlQiLCJSSUdIVCIsIlVQIiwiRE9XTiIsIm1vdmUiLCJwdXNoIiwiZ2V0TmV4dCIsImZvb2QiLCJzcGxpY2UiLCJzbmFrZVNsaWRlc0ludG9JdHNlbGYiLCJzbmFrZVBhcnQiLCJmaWxsUmVjdCIsImZvb2RfRm9vZCIsIl9zdXBlciIsIkZvb2QiLCJfX2V4dGVuZHMiLCJzbmFrZV9nYW1lX1NuYWtlR2FtZSIsIlNuYWtlR2FtZSIsIl90aGlzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJzbmFrZSIsInNldEludGVydmFsIiwibmV4dFN0ZXAiLCJrZXlib2FyZElucHV0Iiwic2NvcmUiLCJzbmFrZUZvdW5kRm9vZCIsInBsYWNlTmV3Rm9vZCIsImluY3JlYXNlU2NvcmUiLCJzdGFydEdhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXlDb2RlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLHlDQ25FQSxJQ0FZQyxFREFaQyxFQUFBLFdBS0ksU0FBQUEsRUFBWUMsRUFBWUMsR0FDcEJDLEtBQUtGLEVBQUlBLEVBQ1RFLEtBQUtELEVBQUlBLEVBQ1RDLEtBQUtDLGVBQVlDLEVBTXpCLE9BSFdMLEVBQUFMLFVBQUFXLGdCQUFQLFNBQXVCQyxHQUNuQixPQUFRSixLQUFLRixJQUFNTSxFQUFNTixHQUFLRSxLQUFLRCxJQUFNSyxFQUFNTCxHQUV2REYsRUFkQSxJQ0FBLFNBQVlELEdBQ1JBLElBQUEsV0FDQUEsSUFBQSxpQkFDQUEsSUFBQSxlQUNBQSxJQUFBLGVBSkosQ0FBWUEsV0NBWixNQUFBUyxFQUFBLG9CQUFBQSxLQUlBLE9BSG9CQSxFQUFBQyxXQUFzQixHQUN0QkQsRUFBQUUsWUFBdUIsR0FDdkJGLEVBQUFHLFdBQXNCLEdBQzFDSCxFQUpBLEdDS0FJLEVBQUEsV0FPSSxTQUFBQyxFQUFZQyxHQUNSWCxLQUFLWSxLQUFPLElBQUlmLEVBQU0sRUFBRyxHQUN6QkcsS0FBS2EsUUFDTGIsS0FBS2MsS0FBTyxFQUNaZCxLQUFLVyxLQUFPQSxFQXVGcEIsT0FwRldELEVBQUFsQixVQUFBdUIsS0FBUCxTQUFZQyxHQUNSQSxFQUFJQyxVQUFZLE1BQ2hCakIsS0FBS2tCLFVBQVVsQixLQUFLWSxLQUFNSSxFQUFLWCxFQUFTRyxZQUN4QyxJQUFJLElBQUlyQyxFQUFZLEVBQUdBLEVBQUk2QixLQUFLYSxLQUFLTSxPQUFRaEQsSUFDekM2QixLQUFLa0IsVUFBVWxCLEtBQUthLEtBQUsxQyxHQUFJNkMsRUFBS1gsRUFBU0csYUFJNUNFLEVBQUFsQixVQUFBNEIsZ0JBQVAsU0FBdUJDLEdBQ2hCQSxJQUFjekIsRUFBVTBCLE1BQVF0QixLQUFLcUIsWUFBY3pCLEVBQVUyQixPQUVyREYsSUFBY3pCLEVBQVU0QixJQUFNeEIsS0FBS3FCLFlBQWN6QixFQUFVNkIsTUFFM0RKLElBQWN6QixFQUFVNkIsTUFBUXpCLEtBQUtxQixZQUFjekIsRUFBVTRCLElBRTdESCxJQUFjekIsRUFBVTJCLE9BQVN2QixLQUFLcUIsWUFBY3pCLEVBQVUwQixPQUd6RXRCLEtBQUtxQixVQUFZQSxJQUdkWCxFQUFBbEIsVUFBQWtDLEtBQVAsZ0JBQzBCeEIsSUFBbkJGLEtBQUtxQixZQUlSckIsS0FBS2EsS0FBS2MsS0FBSzNCLEtBQUtZLE1BR3BCWixLQUFLWSxLQUFPWixLQUFLNEIsVUFFZDVCLEtBQUtZLEtBQUtULGdCQUFnQkgsS0FBS1csS0FBS2tCLE9BQ25DN0IsS0FBS2MsT0FJTGQsS0FBS2EsS0FBS00sT0FBU25CLEtBQUtjLE1BQ3hCZCxLQUFLYSxLQUFLaUIsT0FBTyxFQUFHLEtBS3BCcEIsRUFBQWxCLFVBQUF1QyxzQkFBUixXQUNJLElBQUksSUFBSTVELEVBQVksRUFBR0EsRUFBSTZCLEtBQUthLEtBQUtNLE9BQVFoRCxJQUN6QyxHQUFHNkIsS0FBS1ksS0FBS1QsZ0JBQWdCSCxLQUFLYSxLQUFLMUMsSUFDbkMsT0FBTyxFQUlmLE9BQU8sR0FHSHVDLEVBQUFsQixVQUFBb0MsUUFBUixXQUNJLE9BQVE1QixLQUFLcUIsV0FDVCxLQUFLekIsRUFBVTRCLEdBQ1gsT0FBR3hCLEtBQUtZLEtBQUtiLEVBQUksRUFBSSxFQUNWLElBQUlGLEVBQU1HLEtBQUtZLEtBQUtkLEVBQUdPLEVBQVNFLGFBRWhDLElBQUlWLEVBQU1HLEtBQUtZLEtBQUtkLEVBQUdFLEtBQUtZLEtBQUtiLEVBQUksR0FFcEQsS0FBS0gsRUFBVTJCLE1BQ1gsT0FBR3ZCLEtBQUtZLEtBQUtkLEVBQUksRUFBSU8sRUFBU0MsV0FDbkIsSUFBSVQsRUFBTSxFQUFHRyxLQUFLWSxLQUFLYixHQUV2QixJQUFJRixFQUFNRyxLQUFLWSxLQUFLZCxFQUFJLEVBQUdFLEtBQUtZLEtBQUtiLEdBRXBELEtBQUtILEVBQVU2QixLQUNYLE9BQUd6QixLQUFLWSxLQUFLYixJQUFNTSxFQUFTRSxZQUNqQixJQUFJVixFQUFNRyxLQUFLWSxLQUFLZCxFQUFHLEdBRXZCLElBQUlELEVBQU1HLEtBQUtZLEtBQUtkLEVBQUdFLEtBQUtZLEtBQUtiLEVBQUksR0FFcEQsS0FBS0gsRUFBVTBCLEtBQ1gsT0FBR3RCLEtBQUtZLEtBQUtkLEVBQUksR0FBTSxFQUNaLElBQUlELEVBQU1RLEVBQVNDLFdBQVlOLEtBQUtZLEtBQUtiLEdBRXpDLElBQUlGLEVBQU1HLEtBQUtZLEtBQUtkLEVBQUUsRUFBR0UsS0FBS1ksS0FBS2IsS0FLbERXLEVBQUFsQixVQUFBMEIsVUFBUixTQUFrQmMsRUFBa0JoQixFQUErQkYsR0FDL0RFLEVBQUlpQixVQUFVRCxFQUFVbEMsRUFBSSxHQUFLZ0IsR0FBT2tCLEVBQVVqQyxFQUFJLEdBQUtlLEVBQU1BLEVBQU1BLElBRS9FSixFQWxHQSx5UkNGQXdCLEVBQUEsU0FBQUMsR0FBQSxTQUFBQyxtREFLQSxPQUwwQkMsRUFBQUQsRUFBQUQsR0FDZkMsRUFBQTVDLFVBQUF1QixLQUFQLFNBQVlDLEdBQ1JBLEVBQUlDLFVBQVksUUFDaEJELEVBQUlpQixVQUFVakMsS0FBS0YsRUFBSSxHQUFLTyxFQUFTRyxZQUFhUixLQUFLRCxFQUFJLEdBQUtNLEVBQVNHLFdBQVdILEVBQVNHLFdBQVlILEVBQVNHLGFBRTFINEIsRUFMQSxDQUEwQnZDLDJDQ0UxQixJQUFBeUMsRUFBQSxXQU1JLFNBQUFDLElBQUEsSUFBQUMsRUFBQXhDLEtBQ1F5QyxFQUFpREMsU0FBU0MsZUFBZSxTQUM3RTNDLEtBQUtnQixJQUFNeUIsRUFBT0csV0FBVyxNQUM3QjVDLEtBQUs2QyxNQUFRLElBQUlwQyxFQUFNVCxNQUN2QkEsS0FBSzZCLEtBQU8sSUFBSUssRUFBSyxFQUFHLEdBQ3hCbEMsS0FBS2UsT0FDTCtCLFlBQVksV0FDUk4sRUFBS08sWUFDTixLQUNIL0MsS0FBS2dELGdCQUNMaEQsS0FBS2lELE1BQVEsRUE2Q3JCLE9BMUNXVixFQUFBL0MsVUFBQXVELFNBQVAsV0FDSS9DLEtBQUs2QyxNQUFNbkIsT0FDWDFCLEtBQUtlLFFBR0Z3QixFQUFBL0MsVUFBQTBELGVBQVAsV0FDSWxELEtBQUttRCxlQUNMbkQsS0FBS29ELGlCQUdEYixFQUFBL0MsVUFBQTJELGFBQVIsYUFJUVosRUFBQS9DLFVBQUE0RCxjQUFSLFdBQ0lwRCxLQUFLaUQsU0FHRFYsRUFBQS9DLFVBQUF1QixLQUFSLFdBQ0lmLEtBQUtnQixJQUFJQyxVQUFZLE9BQ3JCakIsS0FBS2dCLElBQUlpQixTQUFTLEVBQUcsRUFBRzVCLEVBQVNDLFdBQWFELEVBQVNHLFdBQVlILEVBQVNFLFlBQWNGLEVBQVNHLFlBQ25HUixLQUFLNkIsS0FBS2QsS0FBS2YsS0FBS2dCLEtBQ3BCaEIsS0FBSzZDLE1BQU05QixLQUFLZixLQUFLZ0IsTUFHakJ1QixFQUFBL0MsVUFBQTZELFVBQVIsYUFJUWQsRUFBQS9DLFVBQUF3RCxjQUFSLGVBQUFSLEVBQUF4QyxLQUNJMEMsU0FBU1ksaUJBQWlCLFVBQVcsU0FBQ0MsR0FDWixLQUFsQkEsRUFBTUMsUUFDVmhCLEVBQUtLLE1BQU16QixnQkFBZ0J4QixFQUFVMEIsTUFDUixLQUFsQmlDLEVBQU1DLFFBQ2JoQixFQUFLSyxNQUFNekIsZ0JBQWdCeEIsRUFBVTRCLElBQ1osS0FBbEIrQixFQUFNQyxRQUNiaEIsRUFBS0ssTUFBTXpCLGdCQUFnQnhCLEVBQVUyQixPQUNaLEtBQWxCZ0MsRUFBTUMsU0FDYmhCLEVBQUtLLE1BQU16QixnQkFBZ0J4QixFQUFVNkIsU0FJckRjLEVBN0RBLEdBK0R1QixJQUFJRCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGNsYXNzIEZpZWxkIHtcclxuICAgIHB1YmxpYyBuZXh0RmllbGQgOiBGaWVsZDtcclxuICAgIHB1YmxpYyB4IDogbnVtYmVyO1xyXG4gICAgcHVibGljIHkgOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeCA6IG51bWJlciwgeSA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgICAgICB0aGlzLm5leHRGaWVsZCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGV0ZWN0Q29sbGlzaW9uKGZpZWxkOiBGaWVsZCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy54ID09PSBmaWVsZC54ICYmIHRoaXMueSA9PT0gZmllbGQueSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZW51bSBEaXJlY3Rpb24ge1xyXG4gICAgVVAsXHJcbiAgICBSSUdIVCxcclxuICAgIERPV04sXHJcbiAgICBMRUZUXHJcbn0iLCJleHBvcnQgY2xhc3MgQ29uc3RhbnQge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdBTUVfV0lEVEggOiBudW1iZXIgPSAyMDtcclxuICAgIHN0YXRpYyByZWFkb25seSBHQU1FX0hFSUdIVCA6IG51bWJlciA9IDIwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEZJRUxEX1NJWkUgOiBudW1iZXIgPSAyMDtcclxufSIsImltcG9ydCB7IEZpZWxkIH0gZnJvbSBcIi4vZmllbGRcIjtcclxuaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcIi4vZGlyZWN0aW9uXCI7XHJcbmltcG9ydCB7IFNuYWtlR2FtZSB9IGZyb20gXCIuL3NuYWtlX2dhbWVcIjtcclxuaW1wb3J0IHsgQ29uc3RhbnQgfSBmcm9tIFwiLi9jb25zdGFudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNuYWtlIHtcclxuICAgIHByaXZhdGUgZ2FtZSA6IFNuYWtlR2FtZTtcclxuICAgIHByaXZhdGUgaGVhZCA6IEZpZWxkO1xyXG4gICAgcHJpdmF0ZSB0YWlsIDogRmllbGRbXTtcclxuICAgIHByaXZhdGUgc2l6ZSA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZGlyZWN0aW9uOiBEaXJlY3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IoZ2FtZTogU25ha2VHYW1lKSB7XHJcbiAgICAgICAgdGhpcy5oZWFkID0gbmV3IEZpZWxkKDIsIDcpO1xyXG4gICAgICAgIHRoaXMudGFpbCA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhdyhjdHggOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcclxuICAgICAgICB0aGlzLmRyYXdGaWVsZCh0aGlzLmhlYWQsIGN0eCwgQ29uc3RhbnQuRklFTERfU0laRSk7XHJcbiAgICAgICAgZm9yKHZhciBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy50YWlsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd0ZpZWxkKHRoaXMudGFpbFtpXSwgY3R4LCBDb25zdGFudC5GSUVMRF9TSVpFKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZURpcmVjdGlvbihkaXJlY3Rpb246IERpcmVjdGlvbik6IHZvaWQge1xyXG4gICAgICAgIGlmKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkxFRlQgJiYgdGhpcy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SSUdIVCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5VUCAmJiB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLkRPV04pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uRE9XTiAmJiB0aGlzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlVQKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJJR0hUICYmIHRoaXMuZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTEVGVCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3ZlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmKHRoaXMuZGlyZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhZGQgY3VycmVudCBoZWFkIHRvIHRhaWxcclxuICAgICAgICB0aGlzLnRhaWwucHVzaCh0aGlzLmhlYWQpO1xyXG5cclxuICAgICAgICAvLyBnZXQgbmV4dCBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMuZ2V0TmV4dCgpO1xyXG5cclxuICAgICAgICBpZih0aGlzLmhlYWQuZGV0ZWN0Q29sbGlzaW9uKHRoaXMuZ2FtZS5mb29kKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNpemUrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZpeCB0aGUgd29ybSBzaXplXHJcbiAgICAgICAgaWYgKHRoaXMudGFpbC5sZW5ndGggPiB0aGlzLnNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy50YWlsLnNwbGljZSgwLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgc25ha2VTbGlkZXNJbnRvSXRzZWxmKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvcih2YXIgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMudGFpbC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZih0aGlzLmhlYWQuZGV0ZWN0Q29sbGlzaW9uKHRoaXMudGFpbFtpXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXh0KCk6IEZpZWxkIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLlVQOlxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5oZWFkLnkgLSAxIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5oZWFkLngsIENvbnN0YW50LkdBTUVfSEVJR0hUKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCh0aGlzLmhlYWQueCwgdGhpcy5oZWFkLnkgLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uUklHSFQ6XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhlYWQueCArIDEgPiBDb25zdGFudC5HQU1FX1dJRFRIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCgxLCB0aGlzLmhlYWQueSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5oZWFkLnggKyAxLCB0aGlzLmhlYWQueSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkRPV046XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhlYWQueSA9PT0gQ29uc3RhbnQuR0FNRV9IRUlHSFQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHRoaXMuaGVhZC54LCAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZCh0aGlzLmhlYWQueCwgdGhpcy5oZWFkLnkgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uTEVGVDpcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaGVhZC54IC0gMSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGQoQ29uc3RhbnQuR0FNRV9XSURUSCwgdGhpcy5oZWFkLnkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkKHRoaXMuaGVhZC54LTEsIHRoaXMuaGVhZC55KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3RmllbGQoc25ha2VQYXJ0OiBGaWVsZCwgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHNpemU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGN0eC5maWxsUmVjdCgoc25ha2VQYXJ0LnggLSAxKSAqIHNpemUsIChzbmFrZVBhcnQueSAtIDEpICogc2l6ZSwgc2l6ZSwgc2l6ZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBGaWVsZCB9IGZyb20gXCIuL2ZpZWxkXCI7XHJcbmltcG9ydCB7IENvbnN0YW50IH0gZnJvbSBcIi4vY29uc3RhbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb29kIGV4dGVuZHMgRmllbGQge1xyXG4gICAgcHVibGljIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOnZvaWQge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KCh0aGlzLnggLSAxKSAqIENvbnN0YW50LkZJRUxEX1NJWkUsICh0aGlzLnkgLSAxKSAqIENvbnN0YW50LkZJRUxEX1NJWkUsQ29uc3RhbnQuRklFTERfU0laRSwgQ29uc3RhbnQuRklFTERfU0laRSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTbmFrZSB9IGZyb20gXCIuL3NuYWtlXCI7XHJcbmltcG9ydCB7IEZvb2QgfSBmcm9tIFwiLi9mb29kXCI7XHJcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gXCIuL2RpcmVjdGlvblwiO1xyXG5pbXBvcnQgeyBDb25zdGFudCB9IGZyb20gXCIuL2NvbnN0YW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU25ha2VHYW1lIHtcclxuICAgIHB1YmxpYyBmb29kIDogRm9vZDtcclxuICAgIHByaXZhdGUgc25ha2UgOiBTbmFrZTtcclxuICAgIHByaXZhdGUgY3R4IDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBzY29yZSA6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB2YXIgY2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQgPSA8SFRNTENhbnZhc0VsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic25ha2VcIik7XHJcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIHRoaXMuc25ha2UgPSBuZXcgU25ha2UodGhpcyk7XHJcbiAgICAgICAgdGhpcy5mb29kID0gbmV3IEZvb2QoNCwgNCk7XHJcbiAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm5leHRTdGVwKCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB0aGlzLmtleWJvYXJkSW5wdXQoKTtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbmV4dFN0ZXAoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zbmFrZS5tb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNuYWtlRm91bmRGb29kKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxhY2VOZXdGb29kKCk7XHJcbiAgICAgICAgdGhpcy5pbmNyZWFzZVNjb3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwbGFjZU5ld0Zvb2QoKTogdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5jcmVhc2VTY29yZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjb3JlKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IFwiZ3JleVwiO1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIENvbnN0YW50LkdBTUVfV0lEVEggKiBDb25zdGFudC5GSUVMRF9TSVpFLCBDb25zdGFudC5HQU1FX0hFSUdIVCAqIENvbnN0YW50LkZJRUxEX1NJWkUpO1xyXG4gICAgICAgIHRoaXMuZm9vZC5kcmF3KHRoaXMuY3R4KTtcclxuICAgICAgICB0aGlzLnNuYWtlLmRyYXcodGhpcy5jdHgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRHYW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtleWJvYXJkSW5wdXQoKTogdm9pZCB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzNykge1xyXG4gICAgICAgICAgICB0aGlzLnNuYWtlLmNoYW5nZURpcmVjdGlvbihEaXJlY3Rpb24uTEVGVCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5VUCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5SSUdIVCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc25ha2UuY2hhbmdlRGlyZWN0aW9uKERpcmVjdGlvbi5ET1dOKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgR2FtZSA6IFNuYWtlR2FtZSA9IG5ldyBTbmFrZUdhbWUoKTtcclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==